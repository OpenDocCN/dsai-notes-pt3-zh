- en: ã€åŒè¯­å­—å¹•+èµ„æ–™ä¸‹è½½ã€‘SQLå¸¸ç”¨çŸ¥è¯†ç‚¹åˆè¾‘â€”â€”é«˜æ•ˆä¼˜é›…çš„å­¦ä¹ æ•™ç¨‹ï¼Œå¤æ‚SQLå‰–æä¸æœ€ä½³å®è·µï¼ï¼œå¿«é€Ÿå…¥é—¨ç³»åˆ—ï¼ - P27ï¼šL27- USINGè¡¨è¾¾å¼ -
    ShowMeAI - BV1Pu41117ku
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ã€åŒè¯­å­—å¹•+èµ„æ–™ä¸‹è½½ã€‘SQLå¸¸ç”¨çŸ¥è¯†ç‚¹åˆè¾‘â€”â€”é«˜æ•ˆä¼˜é›…çš„å­¦ä¹ æ•™ç¨‹ï¼Œå¤æ‚SQLå‰–æä¸æœ€ä½³å®è·µï¼ï¼œå¿«é€Ÿå…¥é—¨ç³»åˆ—ï¼ - P27ï¼šL27- USINGè¡¨è¾¾å¼ -
    ShowMeAI - BV1Pu41117ku
- en: å“¦ã€‚![](img/4c5e0763cfb44e98994d583aeac17078_1.png)
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: å“¦ã€‚![](img/4c5e0763cfb44e98994d583aeac17078_1.png)
- en: Back to our SQL store database here we have a simple query that joins the order
    table with a customer tableã€‚ and here's our join conditionã€‚ You have seen several
    examples of this beforeã€‚ Now as our queries get more complexï¼Œ these join conditions
    get in the wayã€‚ they make our queries hard to readï¼Œ but the good news is that
    in MyQlã€‚
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: å›åˆ°æˆ‘ä»¬çš„ SQL å­˜å‚¨æ•°æ®åº“ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„æŸ¥è¯¢ï¼Œå°†è®¢å•è¡¨ä¸å®¢æˆ·è¡¨è¿æ¥åœ¨ä¸€èµ·ã€‚è¿™æ˜¯æˆ‘ä»¬çš„è¿æ¥æ¡ä»¶ã€‚ä½ ä¹‹å‰è§è¿‡å‡ ä¸ªè¿™æ ·çš„ä¾‹å­ã€‚éšç€æŸ¥è¯¢å˜å¾—æ›´åŠ å¤æ‚ï¼Œè¿™äº›è¿æ¥æ¡ä»¶ä¼šé€ æˆå›°æ‰°ã€‚å®ƒä»¬ä½¿å¾—æˆ‘ä»¬çš„æŸ¥è¯¢éš¾ä»¥é˜…è¯»ï¼Œä½†å¥½æ¶ˆæ¯æ˜¯ï¼Œåœ¨
    MySQL ä¸­ã€‚
- en: we have a powerful feature for simplifying these queriesã€‚ğŸ˜Šã€‚If the column name
    is exactly the same across these two tablesã€‚ we can replace the on clause with
    the using clauseï¼Œ which is simpler and shorterã€‚ Let me show youã€‚ So I'm going
    to comment out this line and instead type out usingã€‚ğŸ˜Šï¼ŒIn parenthsesã€‚
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æœ‰ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½å¯ä»¥ç®€åŒ–è¿™äº›æŸ¥è¯¢ã€‚ğŸ˜Šã€‚å¦‚æœè¿™ä¸¤å¼ è¡¨ä¸­çš„åˆ—åå®Œå…¨ç›¸åŒï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ using å­å¥æ›¿æ¢ on å­å¥ï¼Œè¿™æ ·æ›´ç®€å•æ›´çŸ­ã€‚è®©æˆ‘ç»™ä½ æ¼”ç¤ºä¸€ä¸‹ã€‚æ‰€ä»¥æˆ‘è¦æ³¨é‡Šæ‰è¿™ä¸€è¡Œï¼Œè€Œæ˜¯è¾“å…¥
    usingã€‚ğŸ˜Šï¼Œåœ¨æ‹¬å·ä¸­ã€‚
- en: we type out the column name that is customer I Dã€‚ What we have on line 7 is
    exactly identical to what we have on line 6ã€‚ but is shorter and easier to readã€‚
    So let me delete this lineã€‚We can add another join statement here to join the
    orders with the shippersï¼Œ so join with shippersã€‚ğŸ˜Šã€‚Usingã€‚Shiper ID in both these
    tablesï¼Œ we have a column with the exact same nameã€‚All rightã€‚
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é”®å…¥çš„åˆ—åæ˜¯å®¢æˆ· IDã€‚ç¬¬ 7 è¡Œçš„å†…å®¹ä¸ç¬¬ 6 è¡Œå®Œå…¨ç›¸åŒï¼Œä½†æ›´çŸ­ä¸”æ›´æ˜“è¯»ã€‚æ‰€ä»¥è®©æˆ‘åˆ é™¤è¿™ä¸€è¡Œã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å¦ä¸€ä¸ªè¿æ¥è¯­å¥ï¼Œå°†è®¢å•ä¸å‘è´§äººè¿æ¥ï¼Œå› æ­¤è¿æ¥å‘è´§äººã€‚ğŸ˜Šã€‚ä½¿ç”¨ã€‚è¿™ä¸¤ä¸ªè¡¨ä¸­éƒ½æœ‰çš„å‘è´§äºº
    IDï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå®Œå…¨ç›¸åŒçš„åˆ—åã€‚å¥½çš„ã€‚
- en: now let's execute this queryã€‚This is what we getã€‚ We have the order I followed
    by the first name of the customerã€‚ Let's add a new column hereã€‚Soã€‚I'm gonna addã€‚S
    Hã€‚That name that is the name of the shipper So shipperã€‚ Now obviously because
    some of our orders are not shippedã€‚ we need to replace this inner join with a
    left joinã€‚ğŸ˜Šã€‚
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªæŸ¥è¯¢ã€‚è¿™æ˜¯æˆ‘ä»¬å¾—åˆ°çš„ç»“æœã€‚æˆ‘ä»¬æœ‰è®¢å• IDï¼Œåé¢è·Ÿç€å®¢æˆ·çš„åå­—ã€‚è®©æˆ‘ä»¬åœ¨è¿™é‡Œæ·»åŠ ä¸€åˆ—ã€‚å› æ­¤ã€‚æˆ‘å°†æ·»åŠ ã€‚SHã€‚é‚£ä¸ªåå­—æ˜¯å‘è´§äººçš„åå­—ï¼Œæ‰€ä»¥å‘è´§äººã€‚ç°åœ¨æ˜¾ç„¶å› ä¸ºæˆ‘ä»¬çš„ä¸€äº›è®¢å•æ²¡æœ‰å‘è´§ã€‚æˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªå†…è¿æ¥æ›¿æ¢ä¸ºå·¦è¿æ¥ã€‚ğŸ˜Šã€‚
- en: So we can use the using keyword with both inner and outer joinsã€‚Let's execute
    the query one more timeã€‚There you go now we have the name of the shipper next
    to each orderã€‚ beautifulã€‚ğŸ˜Šï¼ŒHoweverï¼Œ we cannot use this technique to join the result
    with the order statuses table because in the order table we have this column called
    statusã€‚ but in order statuses table this column has a different nameã€‚
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å†…è¿æ¥å’Œå¤–è¿æ¥ä¸­ä½¿ç”¨ using å…³é”®å­—ã€‚è®©æˆ‘ä»¬å†æ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢ã€‚ç°åœ¨æˆ‘ä»¬åœ¨æ¯ä¸ªè®¢å•æ—è¾¹éƒ½æœ‰å‘è´§äººåç§°ã€‚å¾ˆæ£’ã€‚ğŸ˜Šï¼Œç„¶è€Œï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨è¿™ç§æŠ€æœ¯å°†ç»“æœä¸è®¢å•çŠ¶æ€è¡¨è¿æ¥ï¼Œå› ä¸ºåœ¨è®¢å•è¡¨ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸ºçŠ¶æ€çš„åˆ—ï¼Œä½†åœ¨è®¢å•çŠ¶æ€è¡¨ä¸­ï¼Œè¿™ä¸€åˆ—æœ‰ä¸åŒçš„åç§°ã€‚
- en: itss order status ID let me show you so order statuses columns there you go
    order status ID so the using keyword only works if the column name is exactly
    the same across different tablesã€‚Nowï¼Œ what if we have multiple columns in our
    joint conditionï¼Œ for exampleï¼Œ earlierã€‚
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒæ˜¯è®¢å•çŠ¶æ€ IDï¼Œè®©æˆ‘ç»™ä½ æ¼”ç¤ºä¸€ä¸‹ï¼Œæ‰€ä»¥è®¢å•çŠ¶æ€åˆ—ã€‚çœ‹ï¼Œè¿™é‡Œæœ‰è®¢å•çŠ¶æ€ IDã€‚æ‰€ä»¥åªæœ‰å½“ä¸åŒè¡¨ä¸­çš„åˆ—åå®Œå…¨ç›¸åŒæ—¶ï¼Œusing å…³é”®å­—æ‰æœ‰æ•ˆã€‚ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬çš„è¿æ¥æ¡ä»¶ä¸­æœ‰å¤šä¸ªåˆ—ï¼Œä¾‹å¦‚ï¼Œä¹‹å‰ã€‚
- en: we talked about this order items tableã€‚ğŸ˜Šï¼ŒI told you that in this table we have
    a composite primary keyã€‚ which basically means a primary key that consists of
    multiple columnsã€‚ so the combination of these two columns uniquely identify each
    record in this table Now if you want to join this table with order item notes
    table in our join conditionã€‚ we should compare both these columns with their corresponding
    columns in the order item notes tableã€‚
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è°ˆåˆ°è¿™ä¸ªè®¢å•é¡¹ç›®è¡¨ã€‚ğŸ˜Šï¼Œæˆ‘å‘Šè¯‰ä½ åœ¨è¿™ä¸ªè¡¨ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤åˆä¸»é”®ã€‚è¿™åŸºæœ¬ä¸Šæ„å‘³ç€ä¸€ä¸ªç”±å¤šä¸ªåˆ—ç»„æˆçš„ä¸»é”®ã€‚å› æ­¤ï¼Œè¿™ä¸¤åˆ—çš„ç»„åˆå”¯ä¸€æ ‡è¯†è¿™ä¸ªè¡¨ä¸­çš„æ¯æ¡è®°å½•ã€‚å¦‚æœä½ æƒ³å°†è¿™ä¸ªè¡¨ä¸è®¢å•é¡¹ç›®å¤‡æ³¨è¡¨è¿æ¥ï¼Œåœ¨æˆ‘ä»¬çš„è¿æ¥æ¡ä»¶ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å°†è¿™ä¸¤åˆ—ä¸è®¢å•é¡¹ç›®å¤‡æ³¨è¡¨ä¸­çš„å¯¹åº”åˆ—è¿›è¡Œæ¯”è¾ƒã€‚
- en: So let's quickly write that query and then simplify it with the using keywordã€‚ğŸ˜Šï¼ŒSo
    select everythingã€‚From order itemsã€‚Now join it with Order item notessã€‚On so here
    we need to compare Oiã€‚ order ID with OIã€‚ order IDã€‚Andã€‚OI dot product ID equal
    to OIN dot product IDã€‚This join condition is kind of messyã€‚ It's hard to read
    this queryã€‚
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥è®©æˆ‘ä»¬å¿«é€Ÿç¼–å†™è¿™ä¸ªæŸ¥è¯¢ï¼Œç„¶åç”¨ using å…³é”®å­—ç®€åŒ–å®ƒã€‚ğŸ˜Šï¼Œæ‰€ä»¥é€‰æ‹©æ‰€æœ‰å†…å®¹ã€‚ä»è®¢å•é¡¹ç›®ã€‚ç°åœ¨å°†å…¶ä¸è®¢å•é¡¹ç›®å¤‡æ³¨è¿æ¥ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦æ¯”è¾ƒ Oiã€‚è®¢å•
    ID ä¸ OIã€‚è®¢å• IDã€‚è¿˜æœ‰ã€‚OI dot äº§å“ ID ç­‰äº OIN dot äº§å“ IDã€‚è¿™ä¸ªè¿æ¥æ¡ä»¶æœ‰ç‚¹æ··ä¹±ã€‚è¿™æ¡æŸ¥è¯¢å¾ˆéš¾é˜…è¯»ã€‚
- en: Now we can simplify this query with the using keywordã€‚ So we talk about usingã€‚ğŸ˜Šï¼ŒIn
    parenthesesã€‚ we add both columns and separate them using a commaï¼Œ so order ID
    and product IDã€‚![](img/4c5e0763cfb44e98994d583aeac17078_3.png)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨ using å…³é”®å­—ç®€åŒ–è¿™ä¸ªæŸ¥è¯¢ã€‚å› æ­¤æˆ‘ä»¬è°ˆåˆ°ä½¿ç”¨ã€‚ğŸ˜Š åœ¨æ‹¬å·ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ ä¸¤ä¸ªåˆ—å¹¶ç”¨é€—å·åˆ†éš”å®ƒä»¬ï¼Œæ‰€ä»¥æ˜¯è®¢å• ID å’Œäº§å“ IDã€‚![](img/4c5e0763cfb44e98994d583aeac17078_3.png)
- en: Isn't that betterï¼Ÿå—¯ã€‚![](img/4c5e0763cfb44e98994d583aeac17078_5.png)
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ ·ä¸æ˜¯æ›´å¥½å—ï¼Ÿå—¯ã€‚![](img/4c5e0763cfb44e98994d583aeac17078_5.png)
- en: Now for exerciseï¼Œ back to our SQL invoicing databaseã€‚ write a query to select
    the payments from the payments table and produce something like thisã€‚ so in this
    table we have the dateï¼Œ the clientï¼Œ the amount and the payment method we can see
    on what date who has paid how much using what payment methodã€‚
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è¿›è¡Œç»ƒä¹ ï¼Œå›åˆ°æˆ‘ä»¬çš„ SQL å¼€ç¥¨æ•°æ®åº“ã€‚å†™ä¸€ä¸ªæŸ¥è¯¢ï¼Œä»æ”¯ä»˜è¡¨ä¸­é€‰æ‹©æ”¯ä»˜è®°å½•ï¼Œç”Ÿæˆç±»ä¼¼è¿™æ ·çš„å†…å®¹ã€‚å› æ­¤åœ¨è¿™ä¸ªè¡¨ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¥æœŸã€å®¢æˆ·ã€é‡‘é¢å’Œæ”¯ä»˜æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ä»€ä¹ˆæ—¥æœŸè°æ”¯ä»˜äº†å¤šå°‘ï¼Œä½¿ç”¨äº†ä»€ä¹ˆæ”¯ä»˜æ–¹å¼ã€‚
- en: '![](img/4c5e0763cfb44e98994d583aeac17078_7.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4c5e0763cfb44e98994d583aeac17078_7.png)'
- en: '![](img/4c5e0763cfb44e98994d583aeac17078_8.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4c5e0763cfb44e98994d583aeac17078_8.png)'
- en: All rightï¼Œ I'm going to use the SQL invoicing databaseã€‚ğŸ˜Šï¼ŒAnd then select everythingã€‚ğŸ˜Šã€‚From
    the payment tableã€‚Join it with the client's tableã€‚Usingã€‚Client ID because in both
    these tablesã€‚ we have the client ID columnã€‚Next we need to join this with payment
    methodsï¼Œ howeverã€‚ the column name between these two tables is differentã€‚
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½çš„ï¼Œæˆ‘å°†ä½¿ç”¨ SQL å¼€ç¥¨æ•°æ®åº“ã€‚ğŸ˜Š ç„¶åé€‰æ‹©æ‰€æœ‰å†…å®¹ã€‚ğŸ˜Š ä»æ”¯ä»˜è¡¨ä¸­ã€‚å°†å…¶ä¸å®¢æˆ·è¡¨è¿æ¥ã€‚ä½¿ç”¨å®¢æˆ· IDï¼Œå› ä¸ºåœ¨è¿™ä¸¤ä¸ªè¡¨ä¸­ï¼Œæˆ‘ä»¬éƒ½æœ‰å®¢æˆ· ID åˆ—ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ”¯ä»˜æ–¹å¼è¿æ¥ï¼Œç„¶è€Œè¿™ä¸¤ä¸ªè¡¨ä¹‹é—´çš„åˆ—åä¸åŒã€‚
- en: so in the payment table we have a column called payment methodã€‚ but in payment
    methods table our column is called payment method IDã€‚ğŸ˜Šã€‚So here we cannot use the
    using keywordã€‚And we'll have to use the on clauseã€‚ so on P dot payment underlyingline
    method equals PM dot payment method IDã€‚
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥åœ¨æ”¯ä»˜è¡¨ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå«æ”¯ä»˜æ–¹å¼çš„åˆ—ï¼Œä½†åœ¨æ”¯ä»˜æ–¹å¼è¡¨ä¸­æˆ‘ä»¬çš„åˆ—å«æ”¯ä»˜æ–¹å¼ IDã€‚ğŸ˜Š æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ using å…³é”®å­—ã€‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ on
    å­å¥ï¼Œå› æ­¤ on P.dot.payment æ–¹å¼ç­‰äº PM.dot.payment æ–¹å¼ IDã€‚
- en: Now let's pick our columnsï¼Œ so payment do dateï¼Œ client do nameï¼Œ and we re name
    this as clientã€‚Nextã€‚ we pick the amount and finally the payment methodï¼Œ so let's
    rename that to payment under methodã€‚And execute the queryã€‚ there you goï¼Œ this
    is what we getã€‚ğŸ˜Šï¼ŒThe dateï¼Œ the clientã€‚ the amount and the payment methodã€‚
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬é€‰æ‹©æˆ‘ä»¬çš„åˆ—ï¼Œæ”¯ä»˜æ—¥æœŸã€å®¢æˆ·å§“åï¼Œæˆ‘ä»¬å°†å…¶é‡å‘½åä¸ºå®¢æˆ·ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€‰æ‹©é‡‘é¢ï¼Œæœ€åæ˜¯æ”¯ä»˜æ–¹å¼ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å°†å…¶é‡å‘½åä¸ºæ”¯ä»˜æ–¹å¼ï¼Œå¹¶æ‰§è¡ŒæŸ¥è¯¢ã€‚è¿™æ ·å°±å¾—åˆ°ç»“æœäº†ã€‚ğŸ˜Š
    æ—¥æœŸã€å®¢æˆ·ã€é‡‘é¢å’Œæ”¯ä»˜æ–¹å¼ã€‚
- en: '![](img/4c5e0763cfb44e98994d583aeac17078_10.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4c5e0763cfb44e98994d583aeac17078_10.png)'
- en: Ohã€‚![](img/4c5e0763cfb44e98994d583aeac17078_12.png)
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: å“¦ã€‚![](img/4c5e0763cfb44e98994d583aeac17078_12.png)
