- en: ã€åŒè¯­å­—å¹•+èµ„æ–™ä¸‹è½½ã€‘SQLå¸¸ç”¨çŸ¥è¯†ç‚¹åˆè¾‘â€”â€”é«˜æ•ˆä¼˜é›…çš„å­¦ä¹ æ•™ç¨‹ï¼Œå¤æ‚SQLå‰–æä¸æœ€ä½³å®è·µï¼ï¼œå¿«é€Ÿå…¥é—¨ç³»åˆ—ï¼ - P20ï¼šL20- è‡ªè”æ¥ - ShowMeAI
    - BV1Pu41117ku
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ã€åŒè¯­å­—å¹•+èµ„æ–™ä¸‹è½½ã€‘SQLå¸¸ç”¨çŸ¥è¯†ç‚¹åˆè¾‘â€”â€”é«˜æ•ˆä¼˜é›…çš„å­¦ä¹ æ•™ç¨‹ï¼Œå¤æ‚SQLå‰–æä¸æœ€ä½³å®è·µï¼ï¼œå¿«é€Ÿå…¥é—¨ç³»åˆ—ï¼ - P20ï¼šL20- è‡ªè”æ¥ - ShowMeAI
    - BV1Pu41117ku
- en: '![](img/4c576945b4fc995932ea18ff09407a6e_0.png)'
  id: totrans-1
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4c576945b4fc995932ea18ff09407a6e_0.png)'
- en: å“¦ã€‚In SQLï¼Œ we can also join a table with itselfã€‚ Let me show you an exampleã€‚
    Take a look at this databaseï¼Œ SQL HRã€‚ğŸ˜Šï¼ŒIn this database we have these two tablesã€‚
    employees and officeï¼Œ let's take a look at the data in the employeess tableã€‚There
    you goã€‚So here we have these columnsï¼Œ employee IDï¼Œ first nameï¼Œ last nameï¼Œ their
    job titleã€‚
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: å“¦ï¼Œåœ¨SQLä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¡¨ä¸è‡ªèº«è¿æ¥ã€‚è®©æˆ‘ç»™ä½ ä¸€ä¸ªä¾‹å­ã€‚çœ‹çœ‹è¿™ä¸ªæ•°æ®åº“ï¼ŒSQL HRã€‚ğŸ˜Šåœ¨è¿™ä¸ªæ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬æœ‰è¿™ä¸¤ä¸ªè¡¨ï¼šå‘˜å·¥å’ŒåŠå…¬å®¤ï¼Œè®©æˆ‘ä»¬æŸ¥çœ‹å‘˜å·¥è¡¨ä¸­çš„æ•°æ®ã€‚ä½ çœ‹ï¼Œè¿™é‡Œæœ‰è¿™äº›åˆ—ï¼Œå‘˜å·¥IDï¼Œåå­—ï¼Œå§“æ°ï¼ŒèŒä½ã€‚
- en: salary and reports2 this is the idea of the manager for this person or this
    employee Now once again we don't want to repeat the manager's information here
    like their phone numberã€‚ their address because this information can change in
    the future so we are only using their identifier or their ID to refer to them
    in the tableã€‚
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: è–ªèµ„å’Œreports2ï¼Œè¿™æ˜¯è¿™ä¸ªå‘˜å·¥æˆ–æ­¤äººçš„ç»ç†çš„æƒ³æ³•ã€‚ç°åœ¨æˆ‘ä»¬ä¸æƒ³åœ¨è¿™é‡Œé‡å¤ç»ç†çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä»–ä»¬çš„ç”µè¯å·ç ã€åœ°å€ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯å°†æ¥å¯èƒ½ä¼šæ”¹å˜ï¼Œå› æ­¤æˆ‘ä»¬ä»…ä½¿ç”¨ä»–ä»¬çš„æ ‡è¯†ç¬¦æˆ–IDåœ¨è¡¨ä¸­å¼•ç”¨ä»–ä»¬ã€‚
- en: Nowï¼Œ where can we find the information about this managerï¼Ÿ Wellã€‚ this manager
    is actually an employee of the same organization soã€‚ğŸ˜Šï¼ŒLook at this exampleã€‚ the
    manager ID is 37270ã€‚Nowï¼Œ if you look on the left sideï¼Œ here's the idea of that
    managerã€‚ which is another employeeã€‚ğŸ˜Šï¼ŒNow who's the manager for this employeeï¼Œ
    let's take a lookã€‚ğŸ˜Šã€‚
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°å…³äºè¿™ä¸ªç»ç†çš„ä¿¡æ¯å‘¢ï¼Ÿå—¯ï¼Œè¿™ä¸ªç»ç†å®é™…ä¸Šæ˜¯åŒä¸€ç»„ç»‡çš„å‘˜å·¥ğŸ˜Šã€‚çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼Œç»ç†IDæ˜¯37270ã€‚ç°åœ¨ï¼Œå¦‚æœä½ çœ‹å·¦ä¾§ï¼Œè¿™é‡Œæ˜¯é‚£ä½ç»ç†çš„IDï¼Œä¹Ÿå°±æ˜¯å¦ä¸€ä¸ªå‘˜å·¥ğŸ˜Šã€‚é‚£ä¹ˆè¿™ä¸ªå‘˜å·¥çš„ç»ç†æ˜¯è°å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹çœ‹ğŸ˜Šã€‚
- en: We don't have any values hereï¼Œ so the value for this sale is nullã€‚ so this employee
    doesn't have a managerï¼Œ and that means they are the CEOã€‚ğŸ˜Šã€‚So now let's go ahead
    and write a query to join this table with itself so we can select the name of
    each employee and their managerã€‚ğŸ˜Šï¼ŒBack to a query windowï¼Œ first we need to select
    the SQL HR databaseã€‚Nextã€‚
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰ä»»ä½•å€¼ï¼Œæ‰€ä»¥è¿™ä¸ªé”€å”®çš„å€¼ä¸ºnullã€‚å› æ­¤è¿™ä¸ªå‘˜å·¥æ²¡æœ‰ç»ç†ï¼Œè¿™æ„å‘³ç€ä»–ä»¬æ˜¯CEOğŸ˜Šã€‚ç°åœ¨è®©æˆ‘ä»¬å†™ä¸€ä¸ªæŸ¥è¯¢ï¼Œå°†è¿™ä¸ªè¡¨ä¸è‡ªèº«è¿æ¥ï¼Œä»¥ä¾¿é€‰æ‹©æ¯ä¸ªå‘˜å·¥åŠå…¶ç»ç†çš„å§“åğŸ˜Šã€‚å›åˆ°æŸ¥è¯¢çª—å£ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦é€‰æ‹©SQL
    HRæ•°æ®åº“ã€‚æ¥ä¸‹æ¥ã€‚
- en: we select everything from the employees table we give it an alias like E Now
    we need to join this table with itselfã€‚ so once again we type out employeesï¼Œ but
    we need a different alias what should we call this alias well we want to join
    this table with itself so we can find the managers right so we can use M as in
    short for managersã€‚
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä»å‘˜å·¥è¡¨ä¸­é€‰æ‹©æ‰€æœ‰å†…å®¹ï¼Œæˆ‘ä»¬ç»™å®ƒä¸€ä¸ªåˆ«åï¼Œå¦‚Eã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªè¡¨ä¸è‡ªèº«è¿æ¥ã€‚å› æ­¤å†æ¬¡è¾“å…¥å‘˜å·¥è¡¨ï¼Œä½†æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸åŒçš„åˆ«åï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç§°å‘¼è¿™ä¸ªåˆ«åå‘¢ï¼Ÿå¥½å§ï¼Œæˆ‘ä»¬æƒ³å°†è¿™ä¸ªè¡¨ä¸è‡ªèº«è¿æ¥ï¼Œä»¥ä¾¿æ‰¾åˆ°ç»ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨Mä½œä¸ºç»ç†çš„ç¼©å†™ã€‚
- en: ğŸ˜Šï¼ŒNow let's type out our joint conditionã€‚So from the employees tableã€‚ we need
    to join the reports underline two column to the managers tableã€‚ which is basically
    theEmploy table itself and what columnã€‚That is employee Under IDã€‚Now let's execute
    this query and see what we getã€‚ğŸ˜Šï¼ŒSoã€‚
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ˜Šç°åœ¨è®©æˆ‘ä»¬å†™å‡ºæˆ‘ä»¬çš„è¿æ¥æ¡ä»¶ã€‚å› æ­¤ï¼Œä»å‘˜å·¥è¡¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†reports underlineä¸¤åˆ—è¿æ¥åˆ°ç»ç†è¡¨ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯å‘˜å·¥è¡¨æœ¬èº«ï¼Œæ¶‰åŠçš„åˆ—æ˜¯å‘˜å·¥çš„IDã€‚ç°åœ¨è®©æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªæŸ¥è¯¢ï¼Œçœ‹çœ‹ç»“æœğŸ˜Šã€‚
- en: We see all the columns from the employees table repeated the first set of columns
    represent information about the employees and then after that we have information
    about the manager in this case we have only one manager in this table but with
    this technique we can easily create an organization chart we can have a hierarchy
    of manager Now let's simplify our query and select only the name of the employee
    and their manager soã€‚
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çœ‹åˆ°å‘˜å·¥è¡¨ä¸­çš„æ‰€æœ‰åˆ—éƒ½é‡å¤äº†ï¼Œç¬¬ä¸€ç»„åˆ—ä»£è¡¨å‘˜å·¥çš„ä¿¡æ¯ï¼Œæ¥ç€æˆ‘ä»¬æœ‰å…³äºç»ç†çš„ä¿¡æ¯ï¼Œåœ¨è¿™ä¸ªè¡¨ä¸­æˆ‘ä»¬åªæœ‰ä¸€ä¸ªç»ç†ï¼Œä½†é€šè¿‡è¿™ä¸ªæŠ€å·§æˆ‘ä»¬å¯ä»¥è½»æ¾åˆ›å»ºä¸€ä¸ªç»„ç»‡ç»“æ„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªç»ç†çš„å±‚çº§ã€‚ç°åœ¨è®©æˆ‘ä»¬ç®€åŒ–æŸ¥è¯¢ï¼Œåªé€‰æ‹©å‘˜å·¥çš„å§“åå’Œä»–ä»¬çš„ç»ç†ã€‚
- en: Back hereã€‚Since every column in the employees table is repeated twiceã€‚ we need
    to prefix each column with a table name for exampleã€‚From the employees tableã€‚
    you want to get employeeã€‚Idã€‚ğŸ˜Šï¼ŒAs well as the first nameã€‚And then from the manager's
    table you want to select the first name as wellã€‚
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: å›åˆ°è¿™é‡Œã€‚ç”±äºå‘˜å·¥è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½é‡å¤äº†ä¸¤æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯åˆ—å‰åŠ ä¸Šè¡¨åï¼Œä¾‹å¦‚ï¼Œä»å‘˜å·¥è¡¨ä¸­ä½ æƒ³è·å–å‘˜å·¥çš„IDğŸ˜Šï¼Œä»¥åŠåå­—ã€‚ç„¶åä»ç»ç†è¡¨ä¸­ä½ ä¹Ÿæƒ³é€‰æ‹©åå­—ã€‚
- en: so every column should be prefixed with the table name or more accurately the
    alias because all these columns exist in two tables rightã€‚ let's go ahead and
    execute this queryã€‚ğŸ˜Šï¼ŒSoã€‚This is what we get employee ID first nameã€‚ and here's
    the manager's first nameã€‚ we can improve this query by giving an alien to this
    column because it doesn't make sense to have two who first name columns soã€‚ğŸ˜Šï¼ŒLet's
    give an alias to the third column managerã€‚Nowï¼Œ let's execute it one more timeã€‚
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥æ¯ä¸€åˆ—éƒ½åº”è¯¥ä»¥è¡¨åæˆ–æ›´å‡†ç¡®åœ°è¯´ï¼Œåˆ«åä¸ºå‰ç¼€ï¼Œå› ä¸ºæ‰€æœ‰è¿™äº›åˆ—åœ¨ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ã€‚å¯¹ï¼Œæˆ‘ä»¬æ¥æ‰§è¡Œè¿™ä¸ªæŸ¥è¯¢ã€‚ğŸ˜Šï¼Œæ‰€ä»¥ã€‚è¿™æ˜¯æˆ‘ä»¬å¾—åˆ°çš„å‘˜å·¥IDã€åå­—ã€‚è¿™é‡Œæ˜¯ç»ç†çš„åå­—ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™è¿™ä¸ªåˆ—ä¸€ä¸ªåˆ«åæ¥æ”¹è¿›è¿™ä¸ªæŸ¥è¯¢ï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªåå­—åˆ—æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥ã€‚ğŸ˜Šï¼Œæˆ‘ä»¬ç»™ç¬¬ä¸‰åˆ—ç»ç†èµ·ä¸€ä¸ªåˆ«åã€‚ç°åœ¨ï¼Œå†æ‰§è¡Œä¸€æ¬¡ã€‚
- en: And here's the end resultï¼Œ so we have the employee IDï¼Œ first name and Addã€‚ğŸ˜Šã€‚So
    joining a table with itself is pretty much the same as joining a table with another
    tableã€‚ the only difference is that we have to use different aliases and we have
    to prefix each column with an aliasã€‚ğŸ˜Šï¼ŒThis is what we call a self joinã€‚Next I'm
    going to show you how to join more than two tablesã€‚ğŸ˜Šã€‚
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€ç»ˆç»“æœæ˜¯ï¼Œæˆ‘ä»¬æœ‰å‘˜å·¥IDã€åå­—å’ŒAddã€‚ğŸ˜Šã€‚å› æ­¤ï¼Œè‡ªè¿æ¥è¡¨ä¸è¿æ¥å…¶ä»–è¡¨éå¸¸ç›¸ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„åˆ«åï¼Œå¹¶ä¸”æ¯ä¸€åˆ—éƒ½éœ€è¦åŠ ä¸Šåˆ«åã€‚ğŸ˜Šï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€ç§°çš„è‡ªè¿æ¥ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•è¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨ã€‚ğŸ˜Šã€‚
- en: '![](img/4c576945b4fc995932ea18ff09407a6e_2.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4c576945b4fc995932ea18ff09407a6e_2.png)'
- en: Ohã€‚
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: å“¦ã€‚
