- en: ã€åŒè¯­å­—å¹•+èµ„æ–™ä¸‹è½½ã€‘SQLå¸¸ç”¨çŸ¥è¯†ç‚¹åˆè¾‘â€”â€”é«˜æ•ˆä¼˜é›…çš„å­¦ä¹ æ•™ç¨‹ï¼Œå¤æ‚SQLå‰–æä¸æœ€ä½³å®è·µï¼ï¼œå¿«é€Ÿå…¥é—¨ç³»åˆ—ï¼ - P26ï¼šL26- è‡ªå¤–è¿æ¥ - ShowMeAI
    - BV1Pu41117ku
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ã€åŒè¯­å­—å¹•+èµ„æ–™ä¸‹è½½ã€‘SQLå¸¸ç”¨çŸ¥è¯†ç‚¹åˆè¾‘â€”â€”é«˜æ•ˆä¼˜é›…çš„å­¦ä¹ æ•™ç¨‹ï¼Œå¤æ‚SQLå‰–æä¸æœ€ä½³å®è·µï¼ï¼œå¿«é€Ÿå…¥é—¨ç³»åˆ—ï¼ - P26ï¼šL26- è‡ªå¤–è¿æ¥ - ShowMeAI
    - BV1Pu41117ku
- en: '![](img/1dbca701ee2f5a521a87b8d364fbbbac_0.png)'
  id: totrans-1
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1dbca701ee2f5a521a87b8d364fbbbac_0.png)'
- en: å“¦ã€‚Early we talked about self joints in SQLï¼Œ so here in the SQL HR databaseã€‚
    we have this employees tableã€‚ğŸ˜Šï¼ŒWe wrote a query to get all the employees and their
    managerã€‚ so here we have this column reports2 that specifies the manager for each
    employeeã€‚So let's go back and rewrite this query to get all the employees and
    their managerã€‚ğŸ˜Šã€‚
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: å“¦ã€‚æ—©äº›æ—¶å€™æˆ‘ä»¬è®¨è®ºäº† SQL ä¸­çš„è‡ªè¿æ¥ï¼Œæ‰€ä»¥åœ¨ SQL HR æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬æœ‰è¿™ä¸ªå‘˜å·¥è¡¨ã€‚ğŸ˜Š æˆ‘ä»¬å†™äº†ä¸€ä¸ªæŸ¥è¯¢æ¥è·å–æ‰€æœ‰å‘˜å·¥åŠå…¶ç»ç†ã€‚æ‰€ä»¥è¿™é‡Œæœ‰è¿™ä¸€åˆ—
    reports2ï¼ŒæŒ‡å®šäº†æ¯ä¸ªå‘˜å·¥çš„ç»ç†ã€‚è®©æˆ‘ä»¬å›å»é‡å†™è¿™ä¸ªæŸ¥è¯¢ï¼Œä»¥è·å–æ‰€æœ‰å‘˜å·¥åŠå…¶ç»ç†ã€‚ğŸ˜Š
- en: Back to our query editor windowã€‚Firstï¼Œ let's use a SQL HR databaseã€‚Then select
    everythingã€‚ğŸ˜Šã€‚From the employees's tableã€‚We give it an alias and then join it with
    itselfã€‚ğŸ˜Šã€‚So this is what we call a self joinã€‚Now we're going to use a different
    alias like M for managersã€‚ğŸ˜Šã€‚Nowã€‚What is the joint condition E dot reports to should
    be equal to M dot employee ID right now for clarityã€‚
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: å›åˆ°æˆ‘ä»¬çš„æŸ¥è¯¢ç¼–è¾‘çª—å£ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ SQL HR æ•°æ®åº“ã€‚ç„¶åé€‰æ‹©æ‰€æœ‰å†…å®¹ã€‚ğŸ˜Š æ¥è‡ªå‘˜å·¥è¡¨ã€‚æˆ‘ä»¬ç»™å®ƒä¸€ä¸ªåˆ«åï¼Œç„¶åä¸è‡ªèº«è¿æ¥ã€‚ğŸ˜Š è¿™å°±æ˜¯æˆ‘ä»¬æ‰€ç§°çš„è‡ªè¿æ¥ã€‚ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„åˆ«åï¼Œä¾‹å¦‚
    M ä»£è¡¨ç»ç†ã€‚ğŸ˜Š ç°åœ¨ï¼Œè¿æ¥æ¡ä»¶æ˜¯ E.dot reports to åº”è¯¥ç­‰äº M.dot employee IDï¼Œç›®å‰ä¸ºäº†æ¸…æ™°èµ·è§ã€‚
- en: let's pick only three columns so E dot employee ID E dot first nameã€‚And M dot
    first nameã€‚ which we rename to managerã€‚ Allrightï¼Œ let's execute this query and
    see what we getã€‚So here's the resultã€‚As we can seeï¼Œ all these employees have the
    same managerã€‚Howeverã€‚ there is something missing hereã€‚ We don't have a record
    for this personï¼Œ this manager himselfã€‚
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬åªé€‰å–ä¸‰åˆ—ï¼ŒE.dot employee IDï¼ŒE.dot first nameï¼Œå’Œ M.dot first nameï¼Œæˆ‘ä»¬å°†å…¶é‡å‘½åä¸ºç»ç†ã€‚å¥½çš„ï¼Œè®©æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªæŸ¥è¯¢ï¼Œçœ‹çœ‹æˆ‘ä»¬å¾—åˆ°ä»€ä¹ˆã€‚æ‰€ä»¥è¿™æ˜¯ç»“æœã€‚æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæ‰€æœ‰è¿™äº›å‘˜å·¥éƒ½æœ‰åŒä¸€ä¸ªç»ç†ã€‚ç„¶è€Œï¼Œè¿™é‡Œç¼ºå°‘äº†ä¸€äº›ä¸œè¥¿ã€‚æˆ‘ä»¬æ²¡æœ‰è¿™ä¸ªäººçš„è®°å½•ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç»ç†æœ¬äººã€‚
- en: So what is missing is a record where we can see the employee ID for this personï¼Œ
    their nameã€‚ and their managerï¼Œ which should be null because this person is the
    CEO or the head of the companyã€‚ but why is this happeningï¼ŸThere is an isã€‚Our innertroyã€‚Because
    this condition we have here will only return people who have a managerã€‚
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ç¼ºå°‘çš„æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªäººçš„å‘˜å·¥ IDã€å§“åå’Œç»ç†çš„è®°å½•ï¼Œè€Œç»ç†åº”è¯¥æ˜¯ nullï¼Œå› ä¸ºè¿™ä¸ªäººæ˜¯ CEO æˆ–å…¬å¸çš„è´Ÿè´£äººã€‚ä½†ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„å†…è¿æ¥ã€‚å› ä¸ºæˆ‘ä»¬è¿™é‡Œçš„æ¡ä»¶åªä¼šè¿”å›æœ‰ç»ç†çš„äººã€‚
- en: we can solve this problem by using a left joinï¼Œ so we do a left join because
    we want to get every employee in this tableã€‚ whether they have a manager or notã€‚ğŸ˜Šï¼ŒOkayï¼Œ
    now let's execute the query one more timeã€‚ğŸ˜Šã€‚There you go now we have a record
    for this personï¼Œ the managerï¼Œ as you can seeã€‚ this person does not have a managerï¼Œ
    that's why we have null hereã€‚ğŸ˜Šã€‚
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å·¦è¿æ¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›è¡Œå·¦è¿æ¥ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¦è·å–è¿™å¼ è¡¨ä¸­çš„æ¯ä¸€ä¸ªå‘˜å·¥ï¼Œæ— è®ºä»–ä»¬æ˜¯å¦æœ‰ç»ç†ã€‚ğŸ˜Š å¥½çš„ï¼Œç°åœ¨æˆ‘ä»¬å†æ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢ã€‚ğŸ˜Š
    æ¥å§ï¼Œç°åœ¨æˆ‘ä»¬æœ‰è¿™ä¸ªäººçš„è®°å½•ï¼Œç»ç†ï¼Œæ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸ªäººæ²¡æœ‰ç»ç†ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¿™é‡Œæœ‰ null çš„åŸå› ã€‚ğŸ˜Š
- en: '![](img/1dbca701ee2f5a521a87b8d364fbbbac_2.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1dbca701ee2f5a521a87b8d364fbbbac_2.png)'
- en: Ohã€‚![](img/1dbca701ee2f5a521a87b8d364fbbbac_4.png)
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: å“¦ã€‚![](img/1dbca701ee2f5a521a87b8d364fbbbac_4.png)
