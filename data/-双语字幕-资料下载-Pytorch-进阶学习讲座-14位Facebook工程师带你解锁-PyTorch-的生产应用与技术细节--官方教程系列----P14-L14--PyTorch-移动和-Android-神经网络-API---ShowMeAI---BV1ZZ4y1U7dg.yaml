- en: ã€åŒè¯­å­—å¹•+èµ„æ–™ä¸‹è½½ã€‘Pytorch è¿›é˜¶å­¦ä¹ è®²åº§ï¼14ä½Facebookå·¥ç¨‹å¸ˆå¸¦ä½ è§£é” PyTorch çš„ç”Ÿäº§åº”ç”¨ä¸æŠ€æœ¯ç»†èŠ‚ ï¼œå®˜æ–¹æ•™ç¨‹ç³»åˆ—ï¼ - P14ï¼šL14-
    PyTorch ç§»åŠ¨å’Œ Android ç¥ç»ç½‘ç»œ API - ShowMeAI - BV1ZZ4y1U7dg
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ã€åŒè¯­å­—å¹•+èµ„æ–™ä¸‹è½½ã€‘Pytorch è¿›é˜¶å­¦ä¹ è®²åº§ï¼14ä½ Facebook å·¥ç¨‹å¸ˆå¸¦ä½ è§£é” PyTorch çš„ç”Ÿäº§åº”ç”¨ä¸æŠ€æœ¯ç»†èŠ‚ ï¼œå®˜æ–¹æ•™ç¨‹ç³»åˆ—ï¼ -
    P14ï¼šL14- PyTorch ç§»åŠ¨å’Œ Android ç¥ç»ç½‘ç»œ API - ShowMeAI - BV1ZZ4y1U7dg
- en: ğŸ¼ã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_1.png)
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ¼ã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_1.png)
- en: Hiï¼Œ I'm Olllyï¼Œ Product Manager on Android Machine learningã€‚And I'm going to
    talk to you about Pytorch mobile support for Android neuralural Networks APIã€‚On
    device machine learning can bring a range of benefitsã€‚By moving computation to
    be local with the dataï¼Œ we can improve privacyã€‚
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: å—¨ï¼Œæˆ‘æ˜¯ Olllyï¼ŒAndroid æœºå™¨å­¦ä¹ çš„äº§å“ç»ç†ã€‚ä»Šå¤©æˆ‘å°†ä¸æ‚¨è°ˆè°ˆ Pytorch å¯¹ Android ç¥ç»ç½‘ç»œ API çš„æ”¯æŒã€‚åœ¨è®¾å¤‡ä¸Šè¿›è¡Œæœºå™¨å­¦ä¹ å¯ä»¥å¸¦æ¥ä¸€ç³»åˆ—å¥½å¤„ã€‚é€šè¿‡å°†è®¡ç®—ç§»åˆ°æ•°æ®æœ¬åœ°ï¼Œæˆ‘ä»¬å¯ä»¥æé«˜éšç§ä¿æŠ¤ã€‚
- en: Ensure that our features workï¼Œ even with intermittent connectivity and reduce
    latencyã€‚ It's a great set of benefitsã€‚ğŸ˜Šã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_3.png)
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ç¡®ä¿æˆ‘ä»¬çš„åŠŸèƒ½åœ¨é—´æ­‡æ€§è¿æ¥æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Œå¹¶å‡å°‘å»¶è¿Ÿã€‚è¿™å¸¦æ¥äº†è¯¸å¤šå¥½å¤„ã€‚ğŸ˜Šã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_3.png)
- en: But on mobile devicesï¼Œ we're always power constrainedã€‚ So it's critical we perform
    this computation as efficiently as possibleã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_5.png)
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œæˆ‘ä»¬å§‹ç»ˆé¢ä¸´åŠŸç‡é™åˆ¶ã€‚å› æ­¤ï¼Œå°½å¯èƒ½é«˜æ•ˆåœ°è¿›è¡Œè®¡ç®—è‡³å…³é‡è¦ã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_5.png)
- en: Thankfullyï¼Œ modern devices have a range of specialist chips that can really
    helpã€‚ğŸ˜Šï¼ŒGPUsã€‚ DSPs and new dedicated ML hardware Acccelerators often termed NPUs
    can improve the power efficiency beyond utilizing the CPU aloneã€‚Each of these
    chips is suited to different tasksï¼Œ and different mobile devices can have different
    configurations of these chipsã€‚This complexity can make it hard to scale a feature
    out to all your user baseã€‚
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¸è¿çš„æ˜¯ï¼Œç°ä»£è®¾å¤‡æ‹¥æœ‰ä¸€ç³»åˆ—ä¸“ä¸šèŠ¯ç‰‡ï¼Œèƒ½å¤ŸçœŸæ­£æä¾›å¸®åŠ©ã€‚ğŸ˜Š GPUã€DSP å’Œæ–°å‹ä¸“ç”¨çš„æœºå™¨å­¦ä¹ ç¡¬ä»¶åŠ é€Ÿå™¨ï¼Œé€šå¸¸ç§°ä¸º NPUï¼Œå¯ä»¥åœ¨ä¸å•ç‹¬ä½¿ç”¨ CPU
    çš„æƒ…å†µä¸‹æé«˜åŠŸç‡æ•ˆç‡ã€‚è¿™äº›èŠ¯ç‰‡å„è‡ªé€‚åˆä¸åŒçš„ä»»åŠ¡ï¼Œä¸åŒçš„ç§»åŠ¨è®¾å¤‡å¯ä»¥é…ç½®ä¸åŒçš„èŠ¯ç‰‡ç»„åˆã€‚è¿™ç§å¤æ‚æ€§å¯èƒ½ä½¿å¾—åœ¨æ‰€æœ‰ç”¨æˆ·ä¸­æ¨å¹¿ä¸€ä¸ªåŠŸèƒ½å˜å¾—å›°éš¾ã€‚
- en: So the Android neuralural Network API provides a single consistent CAP for computational
    offloadã€‚The diagram to the right shows an example architectureã€‚The app can call
    into an ML framework or directly into the neural Networks APIã€‚And the graph is
    then partitioned according to the capabilities of the device at runtimeã€‚
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼ŒAndroid ç¥ç»ç½‘ç»œ API æä¾›äº†ä¸€ä¸ªä¸€è‡´çš„è®¡ç®—å¸è½½æ¥å£ã€‚å³ä¾§çš„å›¾ç¤ºå±•ç¤ºäº†ä¸€ä¸ªç¤ºä¾‹æ¶æ„ã€‚åº”ç”¨å¯ä»¥è°ƒç”¨æœºå™¨å­¦ä¹ æ¡†æ¶æˆ–ç›´æ¥è°ƒç”¨ç¥ç»ç½‘ç»œ APIã€‚ç„¶åå›¾å½¢æ ¹æ®è®¾å¤‡åœ¨è¿è¡Œæ—¶çš„èƒ½åŠ›è¿›è¡Œåˆ†åŒºã€‚
- en: These partitions are then handed off to specific vendor driver code that optimizes
    the calls based on the piece of hardware that's being utilizedã€‚We've been building
    the capabilities and in Android 11 we support over 100 opsï¼Œ including LSTMã€‚We
    have both float and quantized data typesï¼Œ and you can now implement control flow
    directly within your graph using if and wild constructsã€‚ features like quality
    of serviceï¼Œ asynchronous command cus and memory domains enable for extensive optimization
    of your workloadã€‚
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›åˆ†åŒºéšåè¢«ä¼ é€’ç»™ç‰¹å®šçš„ä¾›åº”å•†é©±åŠ¨ç¨‹åºä»£ç ï¼Œä»¥æ ¹æ®æ‰€ä½¿ç”¨çš„ç¡¬ä»¶ä¼˜åŒ–è°ƒç”¨ã€‚æˆ‘ä»¬ä¸€ç›´åœ¨æ„å»ºè¿™äº›åŠŸèƒ½ï¼Œåœ¨ Android 11 ä¸­æ”¯æŒè¶…è¿‡ 100 ä¸ªæ“ä½œï¼ŒåŒ…æ‹¬
    LSTMã€‚æˆ‘ä»¬æœ‰æµ®ç‚¹å’Œé‡åŒ–æ•°æ®ç±»å‹ï¼Œç°åœ¨å¯ä»¥åœ¨å›¾ä¸­ç›´æ¥ä½¿ç”¨ if å’Œ while æ„é€ å®ç°æ§åˆ¶æµã€‚è¯¸å¦‚æœåŠ¡è´¨é‡ã€å¼‚æ­¥å‘½ä»¤ç¼“å†²å’Œå†…å­˜åŸŸç­‰åŠŸèƒ½ä½¿å·¥ä½œè´Ÿè½½çš„ä¼˜åŒ–å˜å¾—æ›´åŠ å¹¿æ³›ã€‚
- en: And we've also made Android neural networks API an upable moduleã€‚This means
    we can produce updates outside of Android Deer releases to better keep pace with
    the ML communityã€‚Advancedments in machine learningï¼Œ a harder acceleration can
    produce big benefits with developing featuresã€‚MLKt saw a 9X latency reduction
    when they moved from CPU to utilizing an APIã€‚
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜å°† Android ç¥ç»ç½‘ç»œ API åˆ¶ä½œæˆäº†å¯å‡çº§æ¨¡å—ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ Android ç‰ˆæœ¬å‘å¸ƒä¹‹å¤–è¿›è¡Œæ›´æ–°ï¼Œä»¥æ›´å¥½åœ°è·Ÿä¸Šæœºå™¨å­¦ä¹ ç¤¾åŒºçš„æ­¥ä¼ã€‚æœºå™¨å­¦ä¹ çš„è¿›æ­¥ä»¥åŠæ›´å¼ºçš„åŠ é€Ÿå¯ä»¥åœ¨å¼€å‘åŠŸèƒ½æ—¶å¸¦æ¥æ˜¾è‘—çš„å¥½å¤„ã€‚MLKt
    åœ¨ä» CPU åˆ‡æ¢åˆ°ä½¿ç”¨ API åï¼Œçœ‹åˆ°å»¶è¿Ÿå‡å°‘äº† 9 å€ã€‚
- en: And the Google Lens team saw an almost 4X reduction when they switched their
    OCR model over to an APIã€‚We want to bring these benefits to as many developers
    as possible and so it' pleased that Pytorj Mo has added support for a neural networks
    APIã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_7.png)
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Google Lens å›¢é˜Ÿåœ¨å°†å…¶ OCR æ¨¡å‹åˆ‡æ¢åˆ° API åï¼Œçœ‹åˆ°è¿‘ 4 å€çš„æ€§èƒ½æå‡ã€‚æˆ‘ä»¬å¸Œæœ›å°†è¿™äº›å¥½å¤„å¸¦ç»™å°½å¯èƒ½å¤šçš„å¼€å‘è€…ï¼Œå› æ­¤å¾ˆé«˜å…´ Pytorch
    Mobile å·²ç»å¢åŠ äº†å¯¹ç¥ç»ç½‘ç»œ API çš„æ”¯æŒã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_7.png)
- en: Utilizing Pytorch Moï¼Œ you get the same familiar Pytorch APIs with no need to
    write native C codeã€‚You can offload directly from the CPU to dedicated hardware
    to get maximum performance across the Android ecosystemã€‚So how do you get startedï¼Œ
    Wellï¼Œ it's pretty easyã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_9.png)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ©ç”¨Pytorch Moï¼Œä½ å¯ä»¥è·å¾—ç›¸åŒç†Ÿæ‚‰çš„Pytorch APIï¼Œè€Œæ— éœ€ç¼–å†™æœ¬åœ°Cä»£ç ã€‚ä½ å¯ä»¥ç›´æ¥ä»CPUå¸è½½åˆ°ä¸“ç”¨ç¡¬ä»¶ï¼Œä»¥åœ¨Androidç”Ÿæ€ç³»ç»Ÿä¸­è·å¾—æœ€ä½³æ€§èƒ½ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•å¼€å§‹å‘¢ï¼Ÿå…¶å®éå¸¸ç®€å•ã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_9.png)
- en: Firstï¼Œ download the Pythtorch mobile nightly builds and then convert your modelã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_11.png)
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œä¸‹è½½Pythtorch mobileå¤œé—´ç‰ˆæœ¬ï¼Œç„¶åè½¬æ¢ä½ çš„æ¨¡å‹ã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_11.png)
- en: It's just a few lines of code as shown hereã€‚You take your torchscript modelã€‚Create
    an input variable to match the input shape and then set the layout to N HWCã€‚Then
    you convert your modelã€‚Optionallyï¼Œ if you wantã€‚ you can even bundle the input
    to make it easier for benchmarkingã€‚Finallyã€‚
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™åªæ˜¯ä¸€å°æ®µä»£ç ï¼Œå¦‚æ­¤å±•ç¤ºã€‚ä½ éœ€è¦ä½¿ç”¨ä½ çš„torchscriptæ¨¡å‹ã€‚åˆ›å»ºä¸€ä¸ªè¾“å…¥å˜é‡ä»¥åŒ¹é…è¾“å…¥å½¢çŠ¶ï¼Œç„¶åå°†å¸ƒå±€è®¾ç½®ä¸ºN HWCã€‚æ¥ç€ä½ å¯ä»¥è½¬æ¢ä½ çš„æ¨¡å‹ã€‚å¯é€‰åœ°ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥å°†è¾“å…¥æ‰“åŒ…ï¼Œä»¥ä¾¿äºåŸºå‡†æµ‹è¯•ã€‚æœ€åã€‚
- en: save your model and you're good to goã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_13.png)
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: ä¿å­˜ä½ çš„æ¨¡å‹ï¼Œä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_13.png)
- en: When it comes time for runtime inferenceï¼Œ if you're using the benchmark or directly
    within your appã€‚ there are no code changes neededã€‚ Just switch out your existing
    model for the new N& API modelã€‚Real time segmentation is a feature that can really
    benefit from hardware accelerationã€‚Imagine the case of trying to determine the
    foreground user from their background for a virtual green screen effectã€‚
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: å½“è¿›è¡Œè¿è¡Œæ—¶æ¨ç†æ—¶ï¼Œå¦‚æœä½ ä½¿ç”¨åŸºå‡†æµ‹è¯•æˆ–ç›´æ¥åœ¨ä½ çš„åº”ç”¨ä¸­ï¼Œåˆ™ä¸éœ€è¦ä»»ä½•ä»£ç æ›´æ”¹ã€‚åªéœ€å°†ç°æœ‰æ¨¡å‹åˆ‡æ¢ä¸ºæ–°çš„N& APIæ¨¡å‹ã€‚å®æ—¶åˆ†å‰²æ˜¯ä¸€ä¸ªå¯ä»¥çœŸæ­£å—ç›Šäºç¡¬ä»¶åŠ é€Ÿçš„åŠŸèƒ½ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨è™šæ‹Ÿç»¿å¹•æ•ˆæœä¸­ï¼Œè¯•å›¾ä»èƒŒæ™¯ä¸­è¯†åˆ«å‰æ™¯ç”¨æˆ·çš„åœºæ™¯ã€‚
- en: You want to run this continuously and at low latency to provide a responsive
    experience to the userã€‚But you're typically also running a lot of computation
    in parallel at the same timeï¼Œ for exampleã€‚ video compositing effectsã€‚The Facebook
    Mesenger team are now testing N API to use for their immersive 360 backgrounds
    featureã€‚ utilizing the new Pytorrch mobile capabilitiesã€‚They're seeing a two x
    reduction in latency and a two x reduction in power consumptionã€‚
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¸Œæœ›æŒç»­è¿è¡Œæ­¤åŠŸèƒ½å¹¶ä¿æŒä½å»¶è¿Ÿï¼Œä»¥æä¾›å“åº”è¿…é€Ÿçš„ç”¨æˆ·ä½“éªŒã€‚ä½†é€šå¸¸ä½ è¿˜ä¼šåŒæ—¶è¿›è¡Œå¤§é‡å¹¶è¡Œè®¡ç®—ï¼Œä¾‹å¦‚è§†é¢‘åˆæˆæ•ˆæœã€‚Facebook Messengerå›¢é˜Ÿç°åœ¨æ­£åœ¨æµ‹è¯•N
    APIï¼Œä»¥ç”¨äºä»–ä»¬çš„æ²‰æµ¸å¼360èƒŒæ™¯åŠŸèƒ½ï¼Œåˆ©ç”¨æ–°çš„Pytorrch mobileèƒ½åŠ›ã€‚ä»–ä»¬çœ‹åˆ°å»¶è¿Ÿå‡å°‘äº†ä¸¤å€ï¼ŒåŠŸè€—ä¹Ÿå‡å°‘äº†ä¸¤å€ã€‚
- en: The initial release supports a powerful but small set of featuresã€‚It has support
    for Android 10+ devicesï¼Œ linear convolution models such as Facebook Ne and multiplayer
    perceptron modelsã€‚In additionï¼Œ the team are hard at work on the next set of featuresã€‚
    including additional operator typesï¼Œ support for the popular mask RCNN model and
    fallback for optimized CPU pathsã€‚
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: åˆå§‹ç‰ˆæœ¬æ”¯æŒä¸€å¥—å¼ºå¤§ä½†å°å‹çš„åŠŸèƒ½ã€‚å®ƒæ”¯æŒAndroid 10+è®¾å¤‡ï¼Œçº¿æ€§å·ç§¯æ¨¡å‹ï¼Œå¦‚Facebook Neå’Œå¤šå±‚æ„ŸçŸ¥å™¨æ¨¡å‹ã€‚æ­¤å¤–ï¼Œå›¢é˜Ÿæ­£åœ¨å…¨åŠ›ä»¥èµ´å¼€å‘ä¸‹ä¸€ç»„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ›´å¤šçš„æ“ä½œç¬¦ç±»å‹ï¼Œæ”¯æŒæµè¡Œçš„mask
    RCNNæ¨¡å‹ä»¥åŠä¼˜åŒ–CPUè·¯å¾„çš„å›é€€ã€‚
- en: The team are also investigating additional support for earlier devices and control
    flow semanticsã€‚So that was a brief overview of the new Pytorj mobile support for
    Android neuralural Networks APIã€‚Download the Pytorch mobile nightly bill today
    and get started testing the codeã€‚Pleaseã€‚ do provide your feedbackã€‚
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: å›¢é˜Ÿè¿˜åœ¨è°ƒæŸ¥å¯¹æ—©æœŸè®¾å¤‡å’Œæ§åˆ¶æµè¯­ä¹‰çš„é¢å¤–æ”¯æŒã€‚è¿™æ˜¯å¯¹Androidç¥ç»ç½‘ç»œAPIçš„æ–°Pytorj mobileæ”¯æŒçš„ç®€è¦æ¦‚è¿°ã€‚ä»Šå¤©ä¸‹è½½Pytorch mobileå¤œé—´ç‰ˆæœ¬ï¼Œå¼€å§‹æµ‹è¯•ä»£ç ã€‚è¯·åŠ¡å¿…æä¾›ä½ çš„åé¦ˆã€‚
- en: '![](img/2143cfd2c52c8c795e5af20d99916e1d_15.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2143cfd2c52c8c795e5af20d99916e1d_15.png)'
- en: For more on Android Ne networkss APIï¼Œ check out the Android NDKDevelop docs
    and for more on the Pytorch mobile integration use the Pytorch mobileDevelop pageã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_17.png)
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è¦äº†è§£æ›´å¤šå…³äºAndroid Neç½‘ç»œAPIçš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹Android NDKDevelopæ–‡æ¡£ï¼›æƒ³äº†è§£æ›´å¤šå…³äºPytorch mobileé›†æˆçš„ä¿¡æ¯ï¼Œè¯·è®¿é—®Pytorch
    mobileDevelopé¡µé¢ã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_17.png)
- en: ğŸ¼We can't wait to see how you take advantage of the full hardware capabilities
    with Pytorch mobile in order to produce amazing machine learning powered experiences
    on Androidã€‚ Thank youã€‚ğŸ˜Šã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_19.png)
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ¼æˆ‘ä»¬è¿«ä¸åŠå¾…æƒ³çœ‹åˆ°ä½ å¦‚ä½•åˆ©ç”¨Pytorch mobileçš„å…¨éƒ¨ç¡¬ä»¶èƒ½åŠ›ï¼Œåœ¨Androidä¸Šåˆ›é€ å‡ºä»¤äººæƒŠå¹çš„æœºå™¨å­¦ä¹ é©±åŠ¨ä½“éªŒã€‚è°¢è°¢ä½ ã€‚ğŸ˜Šã€‚![](img/2143cfd2c52c8c795e5af20d99916e1d_19.png)
